(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{WXL5:function(e,a,i){"use strict";i.r(a),i.d(a,"_frontmatter",(function(){return l})),i.d(a,"default",(function(){return d}));i("91GP"),i("rGqo"),i("yt8O"),i("Btvt"),i("RW0V"),i("q1tI");var t=i("7ljp"),n=i("013z");i("T0C+"),i("qKvR");function b(){return(b=Object.assign||function(e){for(var a=1;a<arguments.length;a++){var i=arguments[a];for(var t in i)Object.prototype.hasOwnProperty.call(i,t)&&(e[t]=i[t])}return e}).apply(this,arguments)}var l={},s=function(e){return function(a){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),Object(t.b)("div",a)}},c=s("PageDescription"),o=s("BR"),p={_frontmatter:l},r=n.a;function d(e){var a=e.components,i=function(e,a){if(null==e)return{};var i,t,n={},b=Object.keys(e);for(t=0;t<b.length;t++)i=b[t],a.indexOf(i)>=0||(n[i]=e[i]);return n}(e,["components"]);return Object(t.b)(r,b({},p,i,{components:a,mdxType:"MDXLayout"}),Object(t.b)(c,{mdxType:"PageDescription"},Object(t.b)("p",null,"Integrating Aquasec Trivy in Cloud Native Toolkit for DevSecOps")),Object(t.b)("h2",null,"Guide"),Object(t.b)("p",null,"DevSecOps ensures the security by doing Vulnerability scanning on the container images. There are several tools available for image scanning. "),Object(t.b)("p",null,Object(t.b)("inlineCode",{parentName:"p"},"Trivy")," is a Simple and Comprehensive Vulnerability Scanner for Containers, Suitable for CI."),Object(t.b)("p",null,"The more information on Trivy is available in ",Object(t.b)("a",b({parentName:"p"},{href:"https://github.com/aquasecurity/trivy"}),"https://github.com/aquasecurity/trivy")),Object(t.b)("p",null,"In this article, we will see, how the trivy was integrated into the ",Object(t.b)("inlineCode",{parentName:"p"},"Jenkins")," and ",Object(t.b)("inlineCode",{parentName:"p"},"Tekton")," pipelines of Cloud Native Toolkit."),Object(t.b)("h2",null,"1. Integrating Trivy in jenkins"),Object(t.b)("p",null,"The CICD process contains several steps. There is a step called ",Object(t.b)("inlineCode",{parentName:"p"},"Build Image")," that will build a image and Push the image to the image registry."),Object(t.b)("span",{className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"1152px"}},"\n      ",Object(t.b)("span",b({parentName:"span"},{className:"gatsby-resp-image-background-image",style:{paddingBottom:"39.93055555555555%",position:"relative",bottom:"0",left:"0",backgroundImage:"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAABYlAAAWJQFJUiTwAAABGklEQVQoz51Ra1fCMAzl//8/UBwiMvZyK7CuXdf1cW0yUPzgB01PTm6S09ubdFVVFcqyBEVrLchijPjNHns/8ZKv5nnG3bVREL3ghnMO54Sdd4zrtoJUki+Lq+AeGdXaSwvvPWJIhI+vi0FgX78y4eQMdnWGcR4RQsCuzCDkQnLqcuTtkXEnO77j08OskIA2I0s2k4GUpCLC9jOudY9ZOgQfUr3/WsmgBiitGGutOSeyZeQ0zr6+wNiYFHzg5bRFSGdoNDbZGrJR8M7jOd+g61smeW8OODRvjJtzjazY8mqYMKS5423BtEc73T5mArxK1GZZPI19/wSKlD/ie1zFGHhEsqIr8HRcwweP/9hNYcDipNBiNCO+a3/3Twa4cIc4k5fCAAAAAElFTkSuQmCC')",backgroundSize:"cover",display:"block"}})),"\n  ",Object(t.b)("img",b({parentName:"span"},{className:"gatsby-resp-image-image",alt:"Jenkins Pipeline",title:"Jenkins Pipeline",src:"/ibm-gsi-cloudnative-journey/static/9b8c2b8e12e06d23b4f3442756221a79/3cbba/01-jenkins-pipeline.png",srcSet:["/ibm-gsi-cloudnative-journey/static/9b8c2b8e12e06d23b4f3442756221a79/7fc1e/01-jenkins-pipeline.png 288w","/ibm-gsi-cloudnative-journey/static/9b8c2b8e12e06d23b4f3442756221a79/a5df1/01-jenkins-pipeline.png 576w","/ibm-gsi-cloudnative-journey/static/9b8c2b8e12e06d23b4f3442756221a79/3cbba/01-jenkins-pipeline.png 1152w","/ibm-gsi-cloudnative-journey/static/9b8c2b8e12e06d23b4f3442756221a79/0b124/01-jenkins-pipeline.png 1728w","/ibm-gsi-cloudnative-journey/static/9b8c2b8e12e06d23b4f3442756221a79/97581/01-jenkins-pipeline.png 1832w"],sizes:"(max-width: 1152px) 100vw, 1152px",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",top:"0",left:"0"},loading:"lazy"})),"\n    "),Object(t.b)("p",null,"Need to split the step into 3 steps."),Object(t.b)("pre",null,Object(t.b)("code",b({parentName:"pre"},{}),"    Build Image\n    Trivy Scan\n    Push Image\n")),Object(t.b)("p",null,"Here is the modified pipeline."),Object(t.b)("span",{className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"1152px"}},"\n      ",Object(t.b)("span",b({parentName:"span"},{className:"gatsby-resp-image-background-image",style:{paddingBottom:"54.166666666666664%",position:"relative",bottom:"0",left:"0",backgroundImage:"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAACMUlEQVQoz31Sa28SQRTdn6GVijTRUih9xC8mRqVSoikLEsEE02j8TSUL2KAxgfip/iMf0Q9C2V12BtjnzHK8s2h9RN3k5szdyZy555zRBoMB3g6GODt7h+FwiE6nA4Oq13uJfr+/6g3jAg2jg263hw6V2n/1+g2M7ina7TZOTtrQ1q+ksLuZRTqTQSazgUrliKqCarUKXa8mmJSuej3ZO6LSa3U0m03UajU0Gg20Wq2k13KFPeR29nE5lcZBqYyRxfB1NIZlWXAcB4xxcM7heS6WyyX+9UkpIYSAtrW9i+vZPNauZojwEGN7hrkXwScC110kRAqFiP5LqPbiOIaWpwmz+R1cogmL90uYOAtwN4DlcJiMCAMBP5QIQoGIJhB/1I9/UkjEMlaS93Fjaxup9EYieUoSHcZgTRls7oK5Ao4rweY+XC9AFIYIAoVRshYKo5CII8hYQtPrT1B+WMGt23fx9Pg5prZNcj2Ega+E0O0hyZHkkZIc06RBcjAI6QLyzSac+RIe8yDpYq1Wb0B/9Bh3iiUcP3sBPpvBiyQ+cxPn/gLWzIIbuLC4RfI9QnOFbAKT8D2fYOT4YBOGiEWrUDZzhURykSTPiNAVMb7MHYx9DzahTwed78jmjDz1YTOLep98thCS5FUwWD0bFYp6NvcODsHJP/UtyGD/L2mG5J9K8/eIVymrSggLezextn4NpfIDfPj0EeOJiYB8FFH0M01aKyLTPCdb+MW7U7j85el8AxFUx1KdD5AhAAAAAElFTkSuQmCC')",backgroundSize:"cover",display:"block"}})),"\n  ",Object(t.b)("img",b({parentName:"span"},{className:"gatsby-resp-image-image",alt:"Jenkins Pipeline with Trivy",title:"Jenkins Pipeline with Trivy",src:"/ibm-gsi-cloudnative-journey/static/0a6fddb63de57b8b2b8539189a7dac9a/3cbba/02-jenkins-pipeline-with-trivy.png",srcSet:["/ibm-gsi-cloudnative-journey/static/0a6fddb63de57b8b2b8539189a7dac9a/7fc1e/02-jenkins-pipeline-with-trivy.png 288w","/ibm-gsi-cloudnative-journey/static/0a6fddb63de57b8b2b8539189a7dac9a/a5df1/02-jenkins-pipeline-with-trivy.png 576w","/ibm-gsi-cloudnative-journey/static/0a6fddb63de57b8b2b8539189a7dac9a/3cbba/02-jenkins-pipeline-with-trivy.png 1152w","/ibm-gsi-cloudnative-journey/static/0a6fddb63de57b8b2b8539189a7dac9a/0b124/02-jenkins-pipeline-with-trivy.png 1728w","/ibm-gsi-cloudnative-journey/static/0a6fddb63de57b8b2b8539189a7dac9a/4ea69/02-jenkins-pipeline-with-trivy.png 2304w","/ibm-gsi-cloudnative-journey/static/0a6fddb63de57b8b2b8539189a7dac9a/e60a9/02-jenkins-pipeline-with-trivy.png 2540w"],sizes:"(max-width: 1152px) 100vw, 1152px",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",top:"0",left:"0"},loading:"lazy"})),"\n    "),Object(t.b)("h4",null,"Build Image"),Object(t.b)("p",null,"The build image will build the image."),Object(t.b)("h4",null,"Trivy Scan"),Object(t.b)("p",null,"Trivy scan will scan the image and print the Vulnerability count as Low, Medium, High and Critical."),Object(t.b)("p",null,"Based on the configured exit criteria (0 Critical) the next step would in the pipeline will continue."),Object(t.b)("p",null,"Here is the logs written during the pipeline execution."),Object(t.b)("span",{className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"1152px"}},"\n      ",Object(t.b)("span",b({parentName:"span"},{className:"gatsby-resp-image-background-image",style:{paddingBottom:"38.19444444444444%",position:"relative",bottom:"0",left:"0",backgroundImage:"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAABYlAAAWJQFJUiTwAAABAElEQVQoz4WRiWoDMQxE/f9/2IOmhVLSsN7D97G7E4+Cy5KGVvCwJVvySFYhBCzLgmmeMU0jrJmbP8E0vLeoNWNtABto+74/hFZrhdJaQ+sRl+8zvs4jnk9D44KX9wGvHyOe3m770+cM4yv+snVdoUopyDkjl4xgC+xQ4Mb6CzPczplEJY9gLeW9h7VW2i6VhROMXeCDRcoRznMNCNHDOQtjDGJsceckh/tt2+QhKcgLnGNKSYgxiR9DFOV8MKUscSYzxsSOdNf4KcgZzu1DqLIf9ES+zH1vibHjx/S5UUBXqbo6JvbL/9l9QbZPQfLLdNgWYfGjT+79IzKaJqRDYVeBj28QgeSpNAAAAABJRU5ErkJggg==')",backgroundSize:"cover",display:"block"}})),"\n  ",Object(t.b)("img",b({parentName:"span"},{className:"gatsby-resp-image-image",alt:"Trivy Log",title:"Trivy Log",src:"/ibm-gsi-cloudnative-journey/static/73a495acb9a4c48d75cea2b28f75cf29/3cbba/03-jenkins-pipeline-trivy-log.png",srcSet:["/ibm-gsi-cloudnative-journey/static/73a495acb9a4c48d75cea2b28f75cf29/7fc1e/03-jenkins-pipeline-trivy-log.png 288w","/ibm-gsi-cloudnative-journey/static/73a495acb9a4c48d75cea2b28f75cf29/a5df1/03-jenkins-pipeline-trivy-log.png 576w","/ibm-gsi-cloudnative-journey/static/73a495acb9a4c48d75cea2b28f75cf29/3cbba/03-jenkins-pipeline-trivy-log.png 1152w","/ibm-gsi-cloudnative-journey/static/73a495acb9a4c48d75cea2b28f75cf29/0b124/03-jenkins-pipeline-trivy-log.png 1728w","/ibm-gsi-cloudnative-journey/static/73a495acb9a4c48d75cea2b28f75cf29/65d9c/03-jenkins-pipeline-trivy-log.png 1836w"],sizes:"(max-width: 1152px) 100vw, 1152px",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",top:"0",left:"0"},loading:"lazy"})),"\n    "),Object(t.b)("h4",null,"Push Image"),Object(t.b)("p",null,"After the scan is completed, it Pushes the image to the Image Registry."),Object(t.b)(o,{mdxType:"BR"}),Object(t.b)(o,{mdxType:"BR"}),Object(t.b)("p",null,"The pipeline scripts are defined in the ",Object(t.b)("inlineCode",{parentName:"p"},"jenkinsfile"),". lets us see the changes done in the jenkins file."),Object(t.b)("h2",null,"2. Jenkinsfile Changes"),Object(t.b)("h3",null,"Declaration"),Object(t.b)("p",null,"Here is the declaration about the Trivy image in the ",Object(t.b)("inlineCode",{parentName:"p"},"containers")," section under ",Object(t.b)("inlineCode",{parentName:"p"},"podTemplate")," in the ",Object(t.b)("inlineCode",{parentName:"p"},"jenkinsfile")),Object(t.b)("span",{className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"568px"}},"\n      ",Object(t.b)("span",b({parentName:"span"},{className:"gatsby-resp-image-background-image",style:{paddingBottom:"178.4722222222222%",position:"relative",bottom:"0",left:"0",backgroundImage:"url('data:image/png;base64,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')",backgroundSize:"cover",display:"block"}})),"\n  ",Object(t.b)("img",b({parentName:"span"},{className:"gatsby-resp-image-image",alt:"Jenkins file declaration",title:"Jenkins file declaration",src:"/ibm-gsi-cloudnative-journey/static/f9b15a1c6d218a426a6bdf13d15e0d5f/7f222/04-jenkinsfile-1-declaration.png",srcSet:["/ibm-gsi-cloudnative-journey/static/f9b15a1c6d218a426a6bdf13d15e0d5f/7fc1e/04-jenkinsfile-1-declaration.png 288w","/ibm-gsi-cloudnative-journey/static/f9b15a1c6d218a426a6bdf13d15e0d5f/7f222/04-jenkinsfile-1-declaration.png 568w"],sizes:"(max-width: 568px) 100vw, 568px",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",top:"0",left:"0"},loading:"lazy"})),"\n    "),Object(t.b)("ol",null,Object(t.b)("li",{parentName:"ol"},Object(t.b)("p",{parentName:"li"},"Name ",Object(t.b)("inlineCode",{parentName:"p"},"trivy")," will be used in the script to refer the trivy container.")),Object(t.b)("li",{parentName:"ol"},Object(t.b)("p",{parentName:"li"},"The image tag of the ",Object(t.b)("inlineCode",{parentName:"p"},"trivy"),".")),Object(t.b)("li",{parentName:"ol"},Object(t.b)("p",{parentName:"li"},"A configmap contains ",Object(t.b)("inlineCode",{parentName:"p"},"username")," details to connect to IBM Cloud Container registry.")),Object(t.b)("li",{parentName:"ol"},Object(t.b)("p",{parentName:"li"},"A secrte contains ",Object(t.b)("inlineCode",{parentName:"p"},"password")," to connect to IBM Cloud Container registry."))),Object(t.b)("h3",null,"Build Image"),Object(t.b)("p",null,"Here are the steps to Build Image."),Object(t.b)("span",{className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"1152px"}},"\n      ",Object(t.b)("span",b({parentName:"span"},{className:"gatsby-resp-image-background-image",style:{paddingBottom:"60.416666666666664%",position:"relative",bottom:"0",left:"0",backgroundImage:"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABYlAAAWJQFJUiTwAAABg0lEQVQoz41S2W7CMBDkN1qS+IjPHJBQEEL9/++a7jgJAoQqHlY+dr07h3dKKaSUcb1ecZ4OuAwZY5cRYkRsLXJw0Fqjrms0TfM2thzXHYvZtG0dOt/ikAJao/H1vUclBVVVPT34qCHDSIzJ4ywIpy5iiB5aBr0++hhhEnS3Y4/rocNlzIjOYr+i+6/Z+4ZawVkjlF2hPOWIYw53+kbybF4keBNvKBt4MYA0SXuSZlxHOXMQw0odm7eqgZXg3q7xiHRX0GkHbyx6oU1jOnE2y0rayS3nJPssA9Jphj+MJc9gvn5AulsMMeKyFPQZLngEQcsmpEpjNkp81Ei9lTzPzBE5GfjWyN0DQv674TxjnkacxOWfPonjCXO36Pk7D+WP3sQ05ihLL0M5mABCGbI1NF60kUkxIM5HeFlJMa2UiCAXOVzRmY95z49PLTfD7hoGLUUxwZ9PaMehFAWhwEdsXCSQhn41aJOE+6qqn02hhlYM0cZAmeVPqlWfLZR6Pj/ev/7DP8ACT8HzpkYCAAAAAElFTkSuQmCC')",backgroundSize:"cover",display:"block"}})),"\n  ",Object(t.b)("img",b({parentName:"span"},{className:"gatsby-resp-image-image",alt:"Jenkins build",title:"Jenkins build",src:"/ibm-gsi-cloudnative-journey/static/1a0cf1e0e54e4d4b3055bd1497625b15/3cbba/04-jenkinsfile-2-build.png",srcSet:["/ibm-gsi-cloudnative-journey/static/1a0cf1e0e54e4d4b3055bd1497625b15/7fc1e/04-jenkinsfile-2-build.png 288w","/ibm-gsi-cloudnative-journey/static/1a0cf1e0e54e4d4b3055bd1497625b15/a5df1/04-jenkinsfile-2-build.png 576w","/ibm-gsi-cloudnative-journey/static/1a0cf1e0e54e4d4b3055bd1497625b15/3cbba/04-jenkinsfile-2-build.png 1152w","/ibm-gsi-cloudnative-journey/static/1a0cf1e0e54e4d4b3055bd1497625b15/4f804/04-jenkinsfile-2-build.png 1696w"],sizes:"(max-width: 1152px) 100vw, 1152px",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",top:"0",left:"0"},loading:"lazy"})),"\n    "),Object(t.b)("ol",null,Object(t.b)("li",{parentName:"ol"},Object(t.b)("p",{parentName:"li"},"Temp image name is framed. ")),Object(t.b)("li",{parentName:"ol"},Object(t.b)("p",{parentName:"li"},"Image is build using ",Object(t.b)("inlineCode",{parentName:"p"},"buildah"),". Here temp image name is used.")),Object(t.b)("li",{parentName:"ol"},Object(t.b)("p",{parentName:"li"},"Login into IBM Cloud Container Registry using ",Object(t.b)("inlineCode",{parentName:"p"},"buildah"),".")),Object(t.b)("li",{parentName:"ol"},Object(t.b)("p",{parentName:"li"},"Temp image is pushed to IBM Cloud Container Registry using ",Object(t.b)("inlineCode",{parentName:"p"},"buildah"),"."))),Object(t.b)("h3",null,"Trivy Scan"),Object(t.b)("p",null,"Here are the steps for trivy Scanning"),Object(t.b)("span",{className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"1152px"}},"\n      ",Object(t.b)("span",b({parentName:"span"},{className:"gatsby-resp-image-background-image",style:{paddingBottom:"87.5%",position:"relative",bottom:"0",left:"0",backgroundImage:"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAAACXBIWXMAABYlAAAWJQFJUiTwAAACBklEQVQ4y5WU6W7bMBCE8xgtRInUyUOHZctGnRYo+v4vNd0hxcBOYMT+MZAskZ93dod6M8YghIDr9YrTYcHieozewVpR28D1HbSsKcsSVVV9qzcCeVPXNdqmhutaDAJSSkEJhNcMewYagZTWGjbCatRGx80ElvvClyrMwE4qnG2Pgx/QC5iWM7x6EnwHPHiL3+uEP8cJ7+sYwWqvNFb7hPU7oOtbrAK5zD6KwDXYWDn7+pLlSoBD1yAMHUbRIrBZJk5pnRYXKg1JFQpFUci1SPd8Ft+VCailT53pYJtGBtPEinpK+tjWJk4+SHzY38kNEjOHaQoIo4eTNk18blMhCSgVqB8afp5xkIpocxsdzpPDJjrJfS+Wjayr2xZ6mmDmCZoaRxmcicOjkmWxW1QGy3bERTb/WgL+nQ/4uy1xQBwU4fzjOBCxWt5qHxj10UMj1gY2vzFJ+29GJ9unJfa4kXfqwaQ/gOqngrcW5+OCi2ieR9ihRy3VE9CYJPaUv/WD+NwBW+9hxbY7rRgvG5w03suQOBQvkYrD2av8HPgvQFoehxZnicsmcmI7CIw2dYxMPttJj0L+5Swzd6yg3cPMCNGquml8Wb4A5AlhVHjNNplNWsz9o5gMdQPN4Dsgs3aUDLJKHkNWSihFaP4Dt4dff1eh2zdyEzfwnrbz6RniBzd94vKaz8D/EJP2jI7+iTgAAAAASUVORK5CYII=')",backgroundSize:"cover",display:"block"}})),"\n  ",Object(t.b)("img",b({parentName:"span"},{className:"gatsby-resp-image-image",alt:"Jenkins scan",title:"Jenkins scan",src:"/ibm-gsi-cloudnative-journey/static/0ac8be2adaf92cb7688cbde5f55ba610/3cbba/04-jenkinsfile-3-scan.png",srcSet:["/ibm-gsi-cloudnative-journey/static/0ac8be2adaf92cb7688cbde5f55ba610/7fc1e/04-jenkinsfile-3-scan.png 288w","/ibm-gsi-cloudnative-journey/static/0ac8be2adaf92cb7688cbde5f55ba610/a5df1/04-jenkinsfile-3-scan.png 576w","/ibm-gsi-cloudnative-journey/static/0ac8be2adaf92cb7688cbde5f55ba610/3cbba/04-jenkinsfile-3-scan.png 1152w","/ibm-gsi-cloudnative-journey/static/0ac8be2adaf92cb7688cbde5f55ba610/be5de/04-jenkinsfile-3-scan.png 1610w"],sizes:"(max-width: 1152px) 100vw, 1152px",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",top:"0",left:"0"},loading:"lazy"})),"\n    "),Object(t.b)("ol",null,Object(t.b)("li",{parentName:"ol"},Object(t.b)("p",{parentName:"li"},"Refers the temp image name created in the previous step. ")),Object(t.b)("li",{parentName:"ol"},Object(t.b)("p",{parentName:"li"},"Registry URL and user details to login into IBM Cloud Container Registry by trivy.")),Object(t.b)("li",{parentName:"ol"},Object(t.b)("p",{parentName:"li"},"Trivy scanning the temp image found in the IBM Cloud Container Registry."))),Object(t.b)("h3",null,"Push Image"),Object(t.b)("p",null,"Here are the steps for Push Image."),Object(t.b)("span",{className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"1152px"}},"\n      ",Object(t.b)("span",b({parentName:"span"},{className:"gatsby-resp-image-background-image",style:{paddingBottom:"66.66666666666666%",position:"relative",bottom:"0",left:"0",backgroundImage:"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAABYlAAAWJQFJUiTwAAABuElEQVQ4y41T6dKbMBDLewDBBowPLnN+SY/p+z+VqjXJTNp+bfpDszA2Wq20XIwx2PcDx7Zi6z22IcA6h7ZpEEzNWqMsSxRFgev1+imeZ1IvcllrDdc2mHyLzhpkeY4sy5HnRcLrB28JlVIQtLVG9DZhIKnh+2cf/YdChbrSuE8dvs097rFLoysqf6r7F9lfFQaO3FOZkI2uxdo52Kai8iqRvyP9jbCEZwCOAQzOJHIZu9IqXcqL08s8y14gHufn2atCrTRabRBDS7IT46NKSKJUMAvigGUeEVmnsT83glM0tCw1ZoOksNE1R3XYO0s4bMFiY90HnyCEt0iCjw3rbcfx5cByrBh5byFmQia0tOdUqDgm053ZfVsmTFRwzEPyU1IXxRLaB5ve2SDSjsUbdLTGkUg8Fns0a1IoD85zmeMI3XXQfY82+LTY8oEEI4HZ5nwXyL6K30/vnl5fNNfGhoiJY428OPPSKt5xjKSAJOKRqBCUJJCqVflH+imU+sqFXn7g6xFxGwP3sMf3ZUiQkcUfUeIfSiUEadLbBuYRxi+EFT00bUDFQ/3oXNEGgVyQ3/DdX/K62D8BFkxww7OxiAUAAAAASUVORK5CYII=')",backgroundSize:"cover",display:"block"}})),"\n  ",Object(t.b)("img",b({parentName:"span"},{className:"gatsby-resp-image-image",alt:"Jenkins Push",title:"Jenkins Push",src:"/ibm-gsi-cloudnative-journey/static/ee2b11d2d61744dccb7a6f9f6cb404ff/3cbba/04-jenkinsfile-4-push.png",srcSet:["/ibm-gsi-cloudnative-journey/static/ee2b11d2d61744dccb7a6f9f6cb404ff/7fc1e/04-jenkinsfile-4-push.png 288w","/ibm-gsi-cloudnative-journey/static/ee2b11d2d61744dccb7a6f9f6cb404ff/a5df1/04-jenkinsfile-4-push.png 576w","/ibm-gsi-cloudnative-journey/static/ee2b11d2d61744dccb7a6f9f6cb404ff/3cbba/04-jenkinsfile-4-push.png 1152w","/ibm-gsi-cloudnative-journey/static/ee2b11d2d61744dccb7a6f9f6cb404ff/8e077/04-jenkinsfile-4-push.png 1620w"],sizes:"(max-width: 1152px) 100vw, 1152px",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",top:"0",left:"0"},loading:"lazy"})),"\n    "),Object(t.b)("ol",null,Object(t.b)("li",{parentName:"ol"},Object(t.b)("p",{parentName:"li"},"Refers the temp image name created in the previous step. ")),Object(t.b)("li",{parentName:"ol"},Object(t.b)("p",{parentName:"li"},"Login into IBM Cloud Container Registry using ",Object(t.b)("inlineCode",{parentName:"p"},"buildah"),".")),Object(t.b)("li",{parentName:"ol"},Object(t.b)("p",{parentName:"li"},"Pull the temp image using ",Object(t.b)("inlineCode",{parentName:"p"},"buildah"),".")),Object(t.b)("li",{parentName:"ol"},Object(t.b)("p",{parentName:"li"},"Tag the image to the actual image name.")),Object(t.b)("li",{parentName:"ol"},Object(t.b)("p",{parentName:"li"},"Push the actual image to IBM Cloud Container Registry using ",Object(t.b)("inlineCode",{parentName:"p"},"buildah"),".")),Object(t.b)("li",{parentName:"ol"},Object(t.b)("p",{parentName:"li"},"Remove the temp image from IBM Cloud Container Registry using ",Object(t.b)("inlineCode",{parentName:"p"},"buildah"),"."))),Object(t.b)("h2",null,"2. Integrating Trivy in Tekton"),Object(t.b)("p",null,"The CICD process contains several steps. There is a step called ",Object(t.b)("inlineCode",{parentName:"p"},"Build")," that will build a image and Push the image to the image registry."),Object(t.b)("span",{className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"1152px"}},"\n      ",Object(t.b)("span",b({parentName:"span"},{className:"gatsby-resp-image-background-image",style:{paddingBottom:"54.166666666666664%",position:"relative",bottom:"0",left:"0",backgroundImage:"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAABxUlEQVQoz51Ru24TQRTdHikFUmQXlh3ZEIeGKnwUHR9A0qc2a8trr0DINR8QCgoMPaJCAgkJOZl9P2bW3pd9uHeMgyEIIUY6OjP3ceY+DNu2YY8tzGYzjMc2THOI0Wh0C8PhkHymxmQygWVZmE6neP7iJcbWFIPBAOYzE0b36AgPCY9OT9HtdtHr9dBqtdBoNNBsNm94B353Oh0d2263NfrHx7h/8gC9/gkMR3j4dnUNIQSklIjjWCOKol94H2wLw1BzRBxGMfyvn+F9+gjDlQGE68AhQQ7636M+vId88wpGKFNEqYKSSle4XC6R5znxSvNqtUJd139HVaEi0ZpgxDKHFylkmboRKIpCo6TAnPhfzma9xqauYKRpAscR8DxP/6adm42ulMEfZFmmoZTSzPZ9ZuxyDTYmSYIgCPB2Psfl60vM3831ex+8AGbP9xHQrH2688x3/rIst4L865rUF4sFDu8e4uDOAfr3+rp9rrSitpk5OaNYvv9pjmzXgsKl7UYJ0lTi/Mk5zh6f4eLpxc/2sQ10fRcL10VB08/L9Q/rb3MkUePKuaYtZ7ecLMjVMThbeAJfqItIVkhUQf6KtruN2a/wOwjL/7XbDTRWAAAAAElFTkSuQmCC')",backgroundSize:"cover",display:"block"}})),"\n  ",Object(t.b)("img",b({parentName:"span"},{className:"gatsby-resp-image-image",alt:"Tekton Pipeline",title:"Tekton Pipeline",src:"/ibm-gsi-cloudnative-journey/static/45beda0890946459595db7785c914d71/3cbba/05-tekton-pipeline.png",srcSet:["/ibm-gsi-cloudnative-journey/static/45beda0890946459595db7785c914d71/7fc1e/05-tekton-pipeline.png 288w","/ibm-gsi-cloudnative-journey/static/45beda0890946459595db7785c914d71/a5df1/05-tekton-pipeline.png 576w","/ibm-gsi-cloudnative-journey/static/45beda0890946459595db7785c914d71/3cbba/05-tekton-pipeline.png 1152w","/ibm-gsi-cloudnative-journey/static/45beda0890946459595db7785c914d71/0b124/05-tekton-pipeline.png 1728w","/ibm-gsi-cloudnative-journey/static/45beda0890946459595db7785c914d71/444e6/05-tekton-pipeline.png 1962w"],sizes:"(max-width: 1152px) 100vw, 1152px",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",top:"0",left:"0"},loading:"lazy"})),"\n    "),Object(t.b)("p",null,"Need to split the step into 3 steps."),Object(t.b)("pre",null,Object(t.b)("code",b({parentName:"pre"},{}),"    build\n    image-scan\n    push\n")),Object(t.b)("p",null,"Here is the modified pipeline."),Object(t.b)("span",{className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"1152px"}},"\n      ",Object(t.b)("span",b({parentName:"span"},{className:"gatsby-resp-image-background-image",style:{paddingBottom:"57.638888888888886%",position:"relative",bottom:"0",left:"0",backgroundImage:"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABYlAAAWJQFJUiTwAAACCklEQVQoz6VSy2rbUBDVB5RuQukiC/9Fd914ZTub1A/JjmWMDSFtoD9Qukw2fUD9kCNa9x/ST+iiJpBloQZXGExrmxTpypJsWZIln957gxXT0GbRC4cRM2dmzmhGeN1uoaF0oZypaLYUvGu20VI6MfqDIa4Mi+Nrf4AG5bQ7Z2i2FSgdFYr6gftevXlLc1sQDkUJz4+PIUoSctks8vk8nuzvx9jbyyCdTiGdSiGTSSNLOQelEorFIkRRROmgDEkqIp/LoUR9giwW8OzoKWr1Omq1GiqVCgqFAicXKCTa6E+Uy2XIssw5lYqMarWK6uER5FodghdE8DwP//36l8BYgzAajzCdTDGZTBBFEY+t1+sbUF/0DzBOuFrBuPyMxfAbBMNeYj6fc1i2jSVV6zgOlssltXP4fsCTojsKh1QIkyP8nOrQdR2u69JkH0EQYEU7hmHE7UbFnWA8CoEYBgghVHYYj8uK21QtU7pt/wY2HctjT7AsC7PZDOefzqG+V9H92IWmaZxITJM3I8TkUxi0ubnl23yzGnFBd7GAH/hIPk4i8SCBxMMEer0eD7KR2WNXYJrk9sK2sIkJV7p5XfBREjv3drB7fxcXXy44YbN1z/fwYzqG69MTC+hWo9tXEyskMwercAW1oeLkxQlOX55C+67FyphK27EwGA3xiyxAbA8L93p5G4Thzf//DURUMnrHGIGNAAAAAElFTkSuQmCC')",backgroundSize:"cover",display:"block"}})),"\n  ",Object(t.b)("img",b({parentName:"span"},{className:"gatsby-resp-image-image",alt:"Tekton Pipeline with Trivy",title:"Tekton Pipeline with Trivy",src:"/ibm-gsi-cloudnative-journey/static/5c6d13f0bb98fdfa5b57b3007f474a4d/3cbba/06-tekton-pipeline-with-trivy.png",srcSet:["/ibm-gsi-cloudnative-journey/static/5c6d13f0bb98fdfa5b57b3007f474a4d/7fc1e/06-tekton-pipeline-with-trivy.png 288w","/ibm-gsi-cloudnative-journey/static/5c6d13f0bb98fdfa5b57b3007f474a4d/a5df1/06-tekton-pipeline-with-trivy.png 576w","/ibm-gsi-cloudnative-journey/static/5c6d13f0bb98fdfa5b57b3007f474a4d/3cbba/06-tekton-pipeline-with-trivy.png 1152w","/ibm-gsi-cloudnative-journey/static/5c6d13f0bb98fdfa5b57b3007f474a4d/0b124/06-tekton-pipeline-with-trivy.png 1728w","/ibm-gsi-cloudnative-journey/static/5c6d13f0bb98fdfa5b57b3007f474a4d/31cb0/06-tekton-pipeline-with-trivy.png 1952w"],sizes:"(max-width: 1152px) 100vw, 1152px",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",top:"0",left:"0"},loading:"lazy"})),"\n    "),Object(t.b)("p",null,"The pipeline scripts are defined as Task in the yaml file. lets us see the changes done in the task file."),Object(t.b)("h1",null,"2. Tekton Task Changes"),Object(t.b)("h3",null,"Declaration"),Object(t.b)("p",null,"Here is the declaration about the Trivy image in the ",Object(t.b)("inlineCode",{parentName:"p"},"Task")),Object(t.b)("span",{className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"770px"}},"\n      ",Object(t.b)("span",b({parentName:"span"},{className:"gatsby-resp-image-background-image",style:{paddingBottom:"150%",position:"relative",bottom:"0",left:"0",backgroundImage:"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAeCAYAAAAsEj5rAAAACXBIWXMAABYlAAAWJQFJUiTwAAADkklEQVRIx51W2VbjOBTMT/QBYnmVbUm2vGUDQmel6Z5+mD5n/v9jakoKBAgwkHmoYxnblVu6dUuMZD0gJxolsWgMoihCFIYICb8+Qfji2XvvjMrhDnq+hZksYUwFEQR88fljIcIjyUuCj35wlMoCar6D6hYYao2ZNZhajaFSuG4rjzkrb3SBCZ9bVXxI5gmTTEJN11CT71D9Daq68dJvuhrL3qLIUiRxfEQcR/9NmLcLaBI54ihOEPKPMZEmh49F+FryKdnp/ShJUxT9LSu8Q64rhCLwJIEQHq/WInyF95ozcjKyskJJyXq2hiwNkiRBTqkOMk1Qygwqz/x98QR52Io3FaapexChsFOo2QaqncMajc20xW1foy5z3yTXmN4o9NUBrkHux06r9JLDMIA0rSds6cfBlFiTsFY5rsaBx4W7BgKXtNXl43rspJ/4cpSlEnmcwRncddvYjhUqVmchvbQMupBoiIoya8JSvkpjf6+zxDfwWKGVFj+KPWLLCqcb1N2U3quxnzbYThr8nHdY0kLNfgP71wNawv56gPqxR3lP/+42SHPJZooDYZGVqGODtOrYlC26gT788xuLv3+j4Mvm4R7xbIZvV2NcUOIlP7yg3Ct+HLB5Y2c1P1mhv3rCNrXILCWTUDVTVKrEatahaS3yyqAdWgxE1zdoOoLroiwOVXmpofevW490xqnIFkjq1leo2wHd9yWqf/4g324gV5z1Lfd2x2narJDeLZGvV8gaizA4yHwic9eRymiDpEViGmi3h7bCZL/G7H5LWTGC4NDlMREQLjzEeExjizfp82ibhCMnUHIEnW00fVhwb5Z1iVsGgwsJFxjO3J+N3dHYMR942zB1OkrZLXps2d0d4VLmKRiOfjuR+YYwCgWN3XkfWq28sV3axE+Z+EmovgkHZ8yimaHwEXYNozVKmvd0Vj8jeyFZHCU3nJLdrMWKps64vy5Vvkr2WrIn3KKqarQkXTIY3PC/lyhfluy73B3SxhG6xHFRJc4hfNkUTcm2lJzdCnt2utXlWXIfCRPELlCbOdwJaGzPdMl5rBafHpnvSyZZmuUkW/rUNu3Ux5dml8+t7llycAWpG9/lnkl8wwlxSf3/CHnaSUZX0d1w/Dh2aeQbEYjz5R67LKved7igdVIeBSJKPhz+L+2hP6QYDiVJLePrurMwjHxxptznU48BmdsJ9PW937tfNwP/e6gwfsy7c/AvAExSADHCCC8AAAAASUVORK5CYII=')",backgroundSize:"cover",display:"block"}})),"\n  ",Object(t.b)("img",b({parentName:"span"},{className:"gatsby-resp-image-image",alt:"Tekton Pipeline declaration",title:"Tekton Pipeline declaration",src:"/ibm-gsi-cloudnative-journey/static/c529f90bac3c44efb2f127546c37ed0b/e926f/07-tekton-task-1-declaration.png",srcSet:["/ibm-gsi-cloudnative-journey/static/c529f90bac3c44efb2f127546c37ed0b/7fc1e/07-tekton-task-1-declaration.png 288w","/ibm-gsi-cloudnative-journey/static/c529f90bac3c44efb2f127546c37ed0b/a5df1/07-tekton-task-1-declaration.png 576w","/ibm-gsi-cloudnative-journey/static/c529f90bac3c44efb2f127546c37ed0b/e926f/07-tekton-task-1-declaration.png 770w"],sizes:"(max-width: 770px) 100vw, 770px",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",top:"0",left:"0"},loading:"lazy"})),"\n    "),Object(t.b)("ol",null,Object(t.b)("li",{parentName:"ol"},Object(t.b)("p",{parentName:"li"},"Image details of the ",Object(t.b)("inlineCode",{parentName:"p"},"buildah"),".")),Object(t.b)("li",{parentName:"ol"},Object(t.b)("p",{parentName:"li"},"The variable name of the ",Object(t.b)("inlineCode",{parentName:"p"},"buildah"),".")),Object(t.b)("li",{parentName:"ol"},Object(t.b)("p",{parentName:"li"},"Image details of the ",Object(t.b)("inlineCode",{parentName:"p"},"trivy"),".")),Object(t.b)("li",{parentName:"ol"},Object(t.b)("p",{parentName:"li"},"The variable name of the ",Object(t.b)("inlineCode",{parentName:"p"},"trivy"),"."))),Object(t.b)("h3",null,"Build Image"),Object(t.b)("p",null,"Here are the steps for Build Image."),Object(t.b)("span",{className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"1152px"}},"\n      ",Object(t.b)("span",b({parentName:"span"},{className:"gatsby-resp-image-background-image",style:{paddingBottom:"86.80555555555556%",position:"relative",bottom:"0",left:"0",backgroundImage:"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAABYlAAAWJQFJUiTwAAAB+klEQVQ4y5WUa5baMAyFWQckcR5O7NgxTkIIhbb7X9btlRkoZ4ZC54eOhWw+XVlyNmVZQhsPpUrkeY6iKO7roz2Lfd7b7XbYKKWg6xo1wRk3Xv3xXbI7sCLM6ga2bVDy9w2cPyTIPyV75idgQUDX1Ih9h8G0cJ1O8L69mtE11NvSH4A5HU/Qj+hxDA4r7TBY+j0mZ1ISSSDrwGS1IiDLkIkRnmV/lUtsUyuqaBqMtkWkjR9KxUYCA2N72yW10fcYgkfnLKy5xuRcXZXYEbwVha2iAmOxp0I/OERCRJlcwc1mb3HwVMv9+bwirEs6uydMEgZzTWqaChuj6DiP4XLC+PuC6TBiHfpU8sJVFMh6ZsITY78iQVS2MInA5P6lZGlmnmdXYB8i3M8L9HGBHnzKJM3xtFtzBCwNkvsWk4m4ndkT3BK83bLkquDIxAPLWFH2FjlHSLqqePlpvfnqq1987Is6iaUuV1WDJszorUtddP+YxXd2H5tOO6j5iC6eEOYTHMvR7Fr+4rW8fCl5XaFgqa2fsMwHnKeY5rEq1dtn+BSoK87RMMLPZ4TI0o1hE/R/fxi+ABttUYwTu7twZFZ2rk13mA5w8l99gZ4Cq4YAjk1nA6Y4YQqBw2xSczqOj/quQlf26MIJ++MKHwMqa9CMEe1yQDdPUEp9C/gHC3TdNXtKrLEAAAAASUVORK5CYII=')",backgroundSize:"cover",display:"block"}})),"\n  ",Object(t.b)("img",b({parentName:"span"},{className:"gatsby-resp-image-image",alt:"Tekton Build",title:"Tekton Build",src:"/ibm-gsi-cloudnative-journey/static/67c410d5b2082e95d77071e9c819f147/3cbba/07-tekton-task-2-build.png",srcSet:["/ibm-gsi-cloudnative-journey/static/67c410d5b2082e95d77071e9c819f147/7fc1e/07-tekton-task-2-build.png 288w","/ibm-gsi-cloudnative-journey/static/67c410d5b2082e95d77071e9c819f147/a5df1/07-tekton-task-2-build.png 576w","/ibm-gsi-cloudnative-journey/static/67c410d5b2082e95d77071e9c819f147/3cbba/07-tekton-task-2-build.png 1152w","/ibm-gsi-cloudnative-journey/static/67c410d5b2082e95d77071e9c819f147/4fee2/07-tekton-task-2-build.png 1542w"],sizes:"(max-width: 1152px) 100vw, 1152px",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",top:"0",left:"0"},loading:"lazy"})),"\n    "),Object(t.b)("ol",null,Object(t.b)("li",{parentName:"ol"},Object(t.b)("p",{parentName:"li"},"Temp image name is framed. ")),Object(t.b)("li",{parentName:"ol"},Object(t.b)("p",{parentName:"li"},"Image is build using ",Object(t.b)("inlineCode",{parentName:"p"},"buildah"),". Here temp image name is used.")),Object(t.b)("li",{parentName:"ol"},Object(t.b)("p",{parentName:"li"},"Login into IBM Cloud Container Registry using ",Object(t.b)("inlineCode",{parentName:"p"},"buildah"),".")),Object(t.b)("li",{parentName:"ol"},Object(t.b)("p",{parentName:"li"},"Temp image is pushed to IBM Cloud Container Registry using ",Object(t.b)("inlineCode",{parentName:"p"},"buildah"),".")),Object(t.b)("li",{parentName:"ol"},Object(t.b)("p",{parentName:"li"},"Username details to Login into IBM Cloud Container Registry.")),Object(t.b)("li",{parentName:"ol"},Object(t.b)("p",{parentName:"li"},"Password details to Login into IBM Cloud Container Registry.")),Object(t.b)("li",{parentName:"ol"},Object(t.b)("p",{parentName:"li"},"Image details reference ",Object(t.b)("inlineCode",{parentName:"p"},"buildah")," from input param.")),Object(t.b)("li",{parentName:"ol"},Object(t.b)("p",{parentName:"li"},"Name of the step"))),Object(t.b)("h3",null,"Trivy Scan"),Object(t.b)("p",null,"Here are the steps for Scanning"),Object(t.b)("span",{className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"1138px"}},"\n      ",Object(t.b)("span",b({parentName:"span"},{className:"gatsby-resp-image-background-image",style:{paddingBottom:"129.5138888888889%",position:"relative",bottom:"0",left:"0",backgroundImage:"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAaCAYAAAC3g3x9AAAACXBIWXMAABYlAAAWJQFJUiTwAAADFklEQVRIx51V2W7bMBDUTxStI5G6qYOSrMOWzzRHgaJF0aJoUaD//yPTXUqynTiJkz6MeZgczix3Kct1XURhiDjw4TiOgRDiv2F5ngefkIQBsjiEotY5WeCMEEJCysuwXCKLiKRIYpQErSJDPoEPSaIArithGwficOCThJIsZ0TSlxlanRrUeYJFMYyrVJlDOCRMzv2I+oI2Gzy27Ls+0jhCV6ToiGBJxA0RzjN1OIBJiiQyhBX1K1bte3BJsUfKPRLle65prdzPoYJhcU6LDeiAlMY8x2HguXmWQPNc10Bf76B3GyTbNYoipzWREZDT/1YQZ8gWazo5PFjtq9y067mmNjXx5bhJtkUxF0FwAIdMnloOlEa1v8VKKzRkb1Nr3C3n2DcFdgQm39WFUSxGUklWJxiiB5dC3oMxXTjY6WidVU0XwbFlO854sxfy0KfFsbG8rudkO0PIASZrnPQMzxtazkVWM80/BStyI7TlCvpmi+7+Bv3ne2gKvGJ1pFSPaoeLUaYvXkxs10McUTIr2lQUKEtN49BYZJLAqJMmPXx36L9omWVyHi50gm1TUj5mRh2Tcfzi0D/bNMXx2dILg2OZxePF8DglpYzHpfZc3xBy8Bkcm77MTWVwpZRpbOa49Jh0Snqua078kCqFa/v01o+PA6mq0qFCOH24jNgqz7PiqWXw/9Mck54p5BjGKkGWabOIbXPLShisjslVOJClY85OxGeE/KOyAk1d0wIPV7YzvIH0TNkG45PlTHMPx2eWo0AhqBdIdI2WCp3jpi/k2inOFOqkgVyuEOkOWbNBmmSIpKCnyYaw7eOmZ9LkLG0EJbTT1PBDep7aHovdGu1miWLZQSh1zLtXKrYCP4QsSkR5jXrRo9pu0VzvoXsiTJK3E1Yyg7feQ63vUc4XdKMxFJeZcM4si1dZpo1O28CrVyi6HfquRUCfVf60SqpzId03wdIihJ/nSHJOnQbtzR71xz3KXQ+fKkdevYdrfzDta2B19W+4q+9Qdz/Rfv2F4ssf2N/+wqZ29ukn3t3+wGy+x0xvMCsu4x9epN28OUUKKwAAAABJRU5ErkJggg==')",backgroundSize:"cover",display:"block"}})),"\n  ",Object(t.b)("img",b({parentName:"span"},{className:"gatsby-resp-image-image",alt:"Tekton Scan",title:"Tekton Scan",src:"/ibm-gsi-cloudnative-journey/static/af858ed503e552c7956914812f2d584b/c966b/07-tekton-task-3-scan.png",srcSet:["/ibm-gsi-cloudnative-journey/static/af858ed503e552c7956914812f2d584b/7fc1e/07-tekton-task-3-scan.png 288w","/ibm-gsi-cloudnative-journey/static/af858ed503e552c7956914812f2d584b/a5df1/07-tekton-task-3-scan.png 576w","/ibm-gsi-cloudnative-journey/static/af858ed503e552c7956914812f2d584b/c966b/07-tekton-task-3-scan.png 1138w"],sizes:"(max-width: 1138px) 100vw, 1138px",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",top:"0",left:"0"},loading:"lazy"})),"\n    "),Object(t.b)("ol",null,Object(t.b)("li",{parentName:"ol"},Object(t.b)("p",{parentName:"li"},"Refers the temp image name created in the previous step. ")),Object(t.b)("li",{parentName:"ol"},Object(t.b)("p",{parentName:"li"},"Trivy scanning the temp image found in the IBM Cloud Container Registry ")),Object(t.b)("li",{parentName:"ol"},Object(t.b)("p",{parentName:"li"},"Username details to Login into IBM Cloud Container Registry.")),Object(t.b)("li",{parentName:"ol"},Object(t.b)("p",{parentName:"li"},"Password details to Login into IBM Cloud Container Registry.")),Object(t.b)("li",{parentName:"ol"},Object(t.b)("p",{parentName:"li"},"Image details of the ",Object(t.b)("inlineCode",{parentName:"p"},"trivy")," from input param.")),Object(t.b)("li",{parentName:"ol"},Object(t.b)("p",{parentName:"li"},"Name of the step.")),Object(t.b)("li",{parentName:"ol"},Object(t.b)("p",{parentName:"li"},"Registry URL and user details to login into IBM Cloud Container Registry by trivy."))),Object(t.b)("h3",null,"Push Image"),Object(t.b)("p",null,"Here are the steps for Pushing Image."),Object(t.b)("span",{className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"1152px"}},"\n      ",Object(t.b)("span",b({parentName:"span"},{className:"gatsby-resp-image-background-image",style:{paddingBottom:"93.75%",position:"relative",bottom:"0",left:"0",backgroundImage:"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAYAAACQjC21AAAACXBIWXMAABYlAAAWJQFJUiTwAAACQUlEQVQ4y6VU2ZKbMBD0d+xiEEIICYlD4GO9lfz/Z3V6tODy5qh1kocuyTD09PTM+FCWJRrrUVYKRVHgeDz+Fw5VVcEYA9toKN4lQX4p54byL3CoVY22aRC7FqOz6EwDpSpokjdVybNE9UBcbb//SNgqC9+2GFybSQWhbRDSBH85wZ9PqFlBTaJaVV8rLBnYk+QcPc6Dxyk6pL7DOvZIY4Cjam8NkzZbBTqrfaHfr8TLa0Hvjyh2D+tKw7UmE60kXcIH4ewtTryvocuJFp7yPN/5LhGrJGZMq2s0tfpQ6JSDNxZjZzBTqQQumbDLigQ7kSRZqXq6XRCJfk2IVN8LKCorNKqFqTWsfLzOSOcFoXf30oUw8IMrLRBbbnPEwvvAmInqHJso6sSCrcsaRmvOYouq76EIaYJhkHRU/BGv5BQF4lUpfgkBTxk1ibs3JekFU+fxPnlc6NONpX1PEd/SgAuViKcTS9192mG0jFudCSXRPr+HqAKii7ikMX+YgpT70XEpV0oSiE/SYVkAwf5MK3UnvI+N9RFjjHz5OdvrNho78nhs2J89xmdCqb+hQhdnjN7lBmiWVDxk/QqfFMouK3bZTG+IyxsCSS29+Tnw6V2u6EFVHmFCwrKccJ0HXKeYSYt/IpQdbTnc6YZxXtE7lt1Zdq/8xZ8nCVkyVTbDmYN95V7brFj+UYrfmP4loeZg17IpLHkaE9IQMYc+j4TM2uOcPUU4qIiuPyEsC4ZlpncNLEkt/7rc5YyaG3Tc1uoZ/ADwihY5azpJ+QAAAABJRU5ErkJggg==')",backgroundSize:"cover",display:"block"}})),"\n  ",Object(t.b)("img",b({parentName:"span"},{className:"gatsby-resp-image-image",alt:"Tekton Push",title:"Tekton Push",src:"/ibm-gsi-cloudnative-journey/static/149c3d9aa94534474c53890df80b6300/3cbba/07-tekton-task-4-push.png",srcSet:["/ibm-gsi-cloudnative-journey/static/149c3d9aa94534474c53890df80b6300/7fc1e/07-tekton-task-4-push.png 288w","/ibm-gsi-cloudnative-journey/static/149c3d9aa94534474c53890df80b6300/a5df1/07-tekton-task-4-push.png 576w","/ibm-gsi-cloudnative-journey/static/149c3d9aa94534474c53890df80b6300/3cbba/07-tekton-task-4-push.png 1152w","/ibm-gsi-cloudnative-journey/static/149c3d9aa94534474c53890df80b6300/293fc/07-tekton-task-4-push.png 1526w"],sizes:"(max-width: 1152px) 100vw, 1152px",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",top:"0",left:"0"},loading:"lazy"})),"\n    "),Object(t.b)("ol",null,Object(t.b)("li",{parentName:"ol"},Object(t.b)("p",{parentName:"li"},"Refers the image url passed as a parameter. ")),Object(t.b)("li",{parentName:"ol"},Object(t.b)("p",{parentName:"li"},"Refers the temp image name created in the previous step. ")),Object(t.b)("li",{parentName:"ol"},Object(t.b)("p",{parentName:"li"},"Login into IBM Cloud Container Registry using ",Object(t.b)("inlineCode",{parentName:"p"},"buildah"),".")),Object(t.b)("li",{parentName:"ol"},Object(t.b)("p",{parentName:"li"},"Pull the temp image using ",Object(t.b)("inlineCode",{parentName:"p"},"buildah"),".")),Object(t.b)("li",{parentName:"ol"},Object(t.b)("p",{parentName:"li"},"Tag the image to the actual image name.")),Object(t.b)("li",{parentName:"ol"},Object(t.b)("p",{parentName:"li"},"Push the actual image to IBM Cloud Container Registry using ",Object(t.b)("inlineCode",{parentName:"p"},"buildah"),".")),Object(t.b)("li",{parentName:"ol"},Object(t.b)("p",{parentName:"li"},"Remove the temp image from IBM Cloud Container Registry using ",Object(t.b)("inlineCode",{parentName:"p"},"buildah"),".")),Object(t.b)("li",{parentName:"ol"},Object(t.b)("p",{parentName:"li"},"Image details of the ",Object(t.b)("inlineCode",{parentName:"p"},"buildah")," from input param.")),Object(t.b)("li",{parentName:"ol"},Object(t.b)("p",{parentName:"li"},"Name of the step."))))}d.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-developer-advanced-devsecops-trivy-index-mdx-f4f08fc1616adb63246e.js.map